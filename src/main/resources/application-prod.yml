spring:
  datasource:
    url: ${DATABASE_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver
    continue-on-error: true
    initialization-mode: never
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 5
      minimum-idle: 2
      idle-timeout: 600000
      max-lifetime: 1800000
      connection-test-query: SELECT 1
      initialization-fail-timeout: -1
      # ì—°ê²° ì‹¤íŒ¨ ì‹œ ë¹ ë¥¸ ì‹¤íŒ¨ ëŒ€ì‹  ì¬ì‹œë„
      leak-detection-threshold: 60000
      validation-timeout: 5000
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        format_sql: false
        dialect: org.hibernate.dialect.MySQLDialect
        jdbc.time_zone: UTC
        # íŠ¸ëœì­ì…˜ ì•ˆì •ì„± ê°œì„ 
        jdbc.batch_size: 20
        order_inserts: true
        order_updates: true
    defer-datasource-initialization: true
    open-in-view: false
  sql:
    init:
      continue-on-error: true
      mode: never
  # ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ê²€ì¦ ë¹„í™œì„±í™”
  jmx:
    enabled: false

  # ğŸŸ¢ ìš´ì˜ í™˜ê²½ MongoDB ì„¤ì •
  data:
    mongodb:
      uri: ${MONGODB_URI}
      auto-index-creation: false
      # MongoDB ì—°ê²° ì‹¤íŒ¨ ì‹œì—ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ í—ˆìš©
      connection-pool:
        max-size: 10
        min-size: 0
        max-wait-time: 5000ms
        max-connection-life-time: 30000ms
      # MongoDB ì—°ê²° ì‹œë„ ì‹œê°„ ì œí•œ
      connection-timeout: 5000ms
      socket-timeout: 10000ms
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 20
          max-idle: 10
          min-idle: 5
        ssl:
          enabled: ${REDIS_SSL_ENABLED:true}

  mail:
    host: smtp.gmail.com
    port: 587
    username: ${MAIL_USERNAME}
    password: ${MAIL_PASSWORD}
    properties:
      mail.smtp.auth: true
      mail.smtp.starttls.enable: true
  security:
    oauth2:
      client:
        registration:
          kakao:
            client-id: ${KAKAO_CLIENT_ID}
            client-secret: ${KAKAO_CLIENT_SECRET}
            redirect-uri: ${KAKAO_REDIRECT_URI:https://your-domain.com/login/oauth2/code/kakao}
            authorization-grant-type: authorization_code
            scope:
              - profile_nickname
            client-name: Kakao
          naver:
            client-id: ${NAVER_CLIENT_ID}
            client-secret: ${NAVER_CLIENT_SECRET}
            redirect-uri: ${NAVER_REDIRECT_URI:https://your-domain.com/login/oauth2/code/naver}
            authorization-grant-type: authorization_code
            scope:
              - name
              - email
            client-name: Naver
        provider:
          kakao:
            authorization-uri: https://kauth.kakao.com/oauth/authorize
            token-uri: https://kauth.kakao.com/oauth/token
            user-info-uri: https://kapi.kakao.com/v2/user/me
            user-name-attribute: id
          naver:
            authorization-uri: https://nid.naver.com/oauth2.0/authorize
            token-uri: https://nid.naver.com/oauth2.0/token
            user-info-uri: https://openapi.naver.com/v1/nid/me
            user-name-attribute: response

# ğŸŸ¢ ìš´ì˜ í™˜ê²½ Google Cloud ì„¤ì •
gcp:
  enabled: ${GCP_ENABLED:true}
  project-id: ${GCP_PROJECT_ID}
  location: ${GCP_LOCATION:us}
  processor-id: ${GCP_PROCESSOR_ID}
  credentials:
    path: ${GCP_CREDENTIALS_PATH:classpath:service-account-key.json}

# ğŸŸ¢ ìš´ì˜ í™˜ê²½ Gemini API ì„¤ì •
gemini:
  api-key: ${GEMINI_API_KEY}
  model-name: gemini-2.5-flash
  api-url: ${GEMINI_API_URL:https://generativelanguage.googleapis.com}

# ê³„ì•½ API ì„¤ì •
contract:
  api:
    base-url: ${CONTRACT_API_BASE_URL:http://localhost:8000}

# ì±—ë´‡ API ì„¤ì •
chatbot:
  api:
    base-url: ${CHATBOT_API_BASE_URL:http://43.201.42.119:8000}
    timeout: ${CHATBOT_API_TIMEOUT:30000}

# ML API ì„¤ì •
ml:
  api:
    base-url: ${ML_API_BASE_URL:http://43.201.42.119:8000/}
    connection-timeout: ${ML_API_CONNECTION_TIMEOUT:10000}
    read-timeout: ${ML_API_READ_TIMEOUT:60000}

jwt:
  secret: ${JWT_SECRET}
  access-token-validity: ${JWT_ACCESS_TOKEN_VALIDITY:86400000}

# AES ì–‘ë°©í–¥ ì•”í˜¸í™” ì„¤ì •
aes:
  secret-key: ${AES_SECRET_KEY}

server:
  # Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì‚¬ìš© ì‹œ ë‚´ë¶€ HTTP í¬íŠ¸
  port: ${SERVER_PORT:8080}
  address: 0.0.0.0

  # Nginxë¥¼ í†µí•œ HTTPS ì‚¬ìš© ì‹œ forwarded headers ì‹ ë¢°
  forward-headers-strategy: framework
  use-forward-headers: true

  # ì§ì ‘ HTTPS ì‚¬ìš© ì‹œ (Nginx ì—†ì´)
  # ssl:
  #   enabled: ${SSL_ENABLED:false}
  #   key-store: ${SSL_KEYSTORE_PATH:classpath:keystore.p12}
  #   key-store-type: ${SSL_KEYSTORE_TYPE:PKCS12}
  #   key-store-password: ${SSL_KEYSTORE_PASSWORD:}
  #   key-alias: ${SSL_KEY_ALIAS:superlawva}
  #   protocol: TLS
  #   enabled-protocols: TLSv1.2,TLSv1.3

# OAuth2 ë¦¬ë‹¤ì´ë ‰íŠ¸ URLì€ ì´ë¯¸ ì²« ë²ˆì§¸ spring: ë¸”ë¡ì— ì„¤ì •ë˜ì–´ ìˆìŒ
# (ì¤‘ë³µ í‚¤ ì œê±°ë¨)

# í”„ë¡œë•ì…˜ í™˜ê²½ ë¡œê¹…
logging:
  level:
    com.superlawva: INFO
    com.superlawva.domain.ocr3: INFO
    com.superlawva.domain.document: INFO
    com.superlawva.domain.words: INFO
    com.superlawva.domain.ml: INFO
    org.springframework.security: WARN
    org.springframework.boot: INFO
    org.springframework.context: INFO
    org.springframework.beans: INFO
    org.hibernate: ${LOGGING_LEVEL_ORG_HIBERNATE:WARN}
    org.springframework.data.redis: WARN
    org.springframework.data.mongodb: INFO
    root: ${LOGGING_LEVEL_ROOT:INFO}
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ìƒì„± ë¹„í™œì„±í™” (í”„ë¡œë•ì…˜ í™˜ê²½)
app:
  create-test-users: false

# Actuator ì„¤ì • (êµ¬ë™ ìš°ì„ )
management:
  endpoints:
    web:
      exposure:
        include: health,info
      base-path: /actuator
  endpoint:
    health:
      show-details: when-authorized
  health:
    defaults:
      enabled: true # ê¸°ë³¸ í—¬ìŠ¤ì²´í¬ í™œì„±í™”
  server:
    port: 8080

frontend:
  url: ${FRONTEND_URL:http://localhost:3000}

# SpringDoc OpenAPI ì„¤ì • (prod í™˜ê²½ ëª…ì‹œì  í™œì„±í™”)
springdoc:
  api-docs:
    path: /v3/api-docs
    enabled: true
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
